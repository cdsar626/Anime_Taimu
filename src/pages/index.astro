---
// Import global styles and components
import '../styles/global.css';
import AnimeSearch from '../components/AnimeSearch.astro';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Anime Time Calculator</title>
		<meta name="description" content="Calculate the total time needed to watch your favorite anime series" />
	</head>
	<body>
		<div class="container">
			<header class="flex flex-col items-center gap-lg mt-xl mb-xl">
				<h1 class="animate-fade-in">Anime Time Calculator</h1>
				<p class="animate-slide-up">Calculate the total time needed to watch your favorite anime series</p>
			</header>
			
			<main class="grid gap-xl">
				<!-- AnimeSearch Component -->
				<section class="animate-scale-in">
					<AnimeSearch />
				</section>
				
				<!-- Placeholder for future components -->
				<div class="card animate-scale-in" id="anime-results" style="display: none;">
					<p>Anime information will appear here...</p>
				</div>
			</main>
			
			<script>
				// Listen for search results from the AnimeSearch component
				document.addEventListener('animeSearchResult', (event) => {
					const { data, error, searchTerm } = event.detail;
					const resultsDiv = document.getElementById('anime-results');
					
					if (data) {
						resultsDiv.innerHTML = `
							<h3>Found: ${data.title.romaji}</h3>
							<p>Episodes: ${data.episodes || 'Unknown'}</p>
							<p>Duration per episode: ${data.duration || 24} minutes</p>
							${data.coverImage.large ? `<img src="${data.coverImage.large}" alt="${data.title.romaji}" style="max-width: 200px; border-radius: 8px;">` : ''}
						`;
						resultsDiv.style.display = 'block';
					} else if (error) {
						resultsDiv.innerHTML = `<p class="error-message">Error: ${error}</p>`;
						resultsDiv.style.display = 'block';
					} else {
						resultsDiv.style.display = 'none';
					}
				});
			</script>
		</div>
	</body>
</html>
